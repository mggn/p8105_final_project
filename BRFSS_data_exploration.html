<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Maria Guzman" />

<meta name="date" content="2020-11-18" />

<title>BRFSS data exploration</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="mailto:&lt;you@youremail.com&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/&lt;YOUR_GH_NAME&gt;/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">BRFSS data exploration</h1>
<h4 class="author">Maria Guzman</h4>
<h4 class="date">11/18/2020</h4>

</div>


<div id="about-brfss" class="section level3">
<h3>About BRFSS</h3>
<p><em>“The Behavioral Risk Factor Surveillance System (BRFSS) is the nation’s premier system of health-related telephone surveys that collect state data about U.S. residents regarding their health-related risk behaviors, chronic health conditions, and use of preventive services. Established in 1984 with 15 states, BRFSS now collects data in all 50 states as well as the District of Columbia and three U.S. territories. BRFSS completes more than 400,000 adult interviews each year, making it the largest continuously conducted health survey system in the world.”</em></p>
<p>11/28/2020: Logit models of interest? -flushot y/n on chroniccond y/n -flushot y/n on insurance y/n -exploration of medcost</p>
<p>First, we need to import the data using read_xpt</p>
<pre class="r"><code>brfss_df =
  read_xpt(&quot;./final_project_large_data/LLCP2019.xpt&quot;) %&gt;%
  janitor::clean_names()%&gt;%
  mutate(
    state = as.factor(state),
    flushot_yn = as.factor(flushot7)
  )%&gt;%
  mutate(
    state = recode(state,
         &quot;1&quot; = &quot;Alabama&quot;,
         &quot;2&quot; = &quot;Alaska&quot;,
         &quot;4&quot; = &quot;Arizona&quot;,
         &quot;5&quot; = &quot;Arkansas&quot;,
         &quot;6&quot; = &quot;California&quot;,
         &quot;8&quot; = &quot;Colorado&quot;,
         &quot;9&quot; = &quot;Connecticut&quot;,
         &quot;10&quot; = &quot;Delaware&quot;,
         &quot;11&quot; = &quot;District of Columbia&quot;,
         &quot;12&quot; = &quot;Florida&quot;,
         &quot;13&quot; = &quot;Georgia&quot;,
         &quot;15&quot; = &quot;Hawaii&quot;,
         &quot;16&quot; = &quot;Idaho&quot;,
         &quot;17&quot; = &quot;Illinois&quot;,
         &quot;18&quot; = &quot;Indiana&quot;,
         &quot;19&quot; = &quot;Iowa&quot;,
         &quot;20&quot; = &quot;Kansas&quot;,
         &quot;21&quot; = &quot;Kentucky&quot;,
         &quot;22&quot; = &quot;Louisiana&quot;,
         &quot;23&quot; = &quot;Maine&quot;,
         &quot;24&quot; = &quot;Maryland&quot;,
         &quot;25&quot; = &quot;Massachusetts&quot;,
         &quot;26&quot; = &quot;Michigan&quot;,
         &quot;27&quot; = &quot;Minnesota&quot;,
         &quot;28&quot; = &quot;Mississippi&quot;,
         &quot;29&quot; = &quot;Missouri&quot;,
         &quot;30&quot; = &quot;Montana&quot;,
         &quot;31&quot; = &quot;Nebraska&quot;,
         &quot;32&quot; = &quot;Nevada&quot;,
         &quot;33&quot; = &quot;New Hampshire&quot;,
         &quot;35&quot; = &quot;New Mexico&quot;,
         &quot;36&quot; = &quot;New York&quot;,
         &quot;37&quot; = &quot;North Carolina&quot;,
         &quot;38&quot; = &quot;North Dakota&quot;,
         &quot;39&quot; = &quot;Ohio&quot;,
         &quot;40&quot; = &quot;Oklahoma&quot;,
         &quot;41&quot; = &quot;Oregon&quot;,
         &quot;42&quot; = &quot;Pennsylvania&quot;,
         &quot;44&quot; = &quot;Rhode Island&quot;,
         &quot;45&quot; = &quot;South Carolina&quot;,
         &quot;46&quot; = &quot;South Dakota&quot;,
         &quot;47&quot; = &quot;Tennessee&quot;,
         &quot;48&quot; = &quot;Texas&quot;,
         &quot;49&quot; = &quot;Utah&quot;,
         &quot;50&quot; = &quot;Vermont&quot;,
         &quot;51&quot; = &quot;Virginia&quot;,
         &quot;53&quot; = &quot;Washington&quot;,
         &quot;54&quot; = &quot;West Virginia&quot;,
         &quot;55&quot; = &quot;Wisconsin&quot;,
         &quot;56&quot; = &quot;Wyoming&quot;,
         &quot;66&quot; = &quot;Guam&quot;,
         &quot;72&quot; = &quot;Puerto Rico&quot;),
    flushot_yn = recode(flushot_yn,
          &quot;1&quot; = &quot;Yes&quot;,
          &quot;2&quot; = &quot;No&quot;,
          &quot;7&quot; = &quot;Don&#39;t know/not sure&quot;,
          &quot;9&quot; = &quot;Refused&quot;)
  )


#head(brfss_df)</code></pre>
<p>per the environment and the code above, we can see that there are 418,268 observations and 342 variables. Upon first glance, the names do not seem that intuitive, so we will have to refer to the codebook at the following link: <a href="https://www.cdc.gov/brfss/annual_data/2019/pdf/codebook19_llcp-v2-508.HTML" class="uri">https://www.cdc.gov/brfss/annual_data/2019/pdf/codebook19_llcp-v2-508.HTML</a></p>
<p>Based, off of this codebook and our interest in vaccines, I will peruse the data and select: -a participant id<br />
-NATIONAL<br />
-demographic variables -variables pertaining to flu vaccine</p>
<div id="poking-through-the-codebook-and-the-clean-names" class="section level4">
<h4>poking through the codebook and the clean names</h4>
<p>Yesterday, I went through the codebook online and pulled the variables of interest. The purpose of creating this codebook, which is in the project file called “BRFSS_codebook_streamlined”, is to (1) compare variables with Ronae’s national survey, which seems to have a lot of overlap with this survey but may be more comprehensive. This comparison will lead us to (2) deciding which dataset to keep and how to split up the larger dataset, if necessary. Finally, before our meeting today I will (3) perform some preliminary data exploration and visualization now that I know which variables to select.</p>
<pre class="r"><code>brfss_df %&gt;%
  select(seqno, state, sexvar, genhlth, physhlth, menthlth, hlthpln1, persdoc2, medcost, checkup1,
         flushot7, imfvpla1, urbstat) %&gt;%
  mutate(
    flu_vacc_loc = as.factor(imfvpla1)
  ) %&gt;%
  drop_na(flu_vacc_loc) %&gt;%
  mutate(
    flu_vacc_loc = recode(flu_vacc_loc,
                          &#39;1&#39; = &quot;Doctor&#39;s office/HMO&quot;,
                          &#39;2&#39; = &quot;Health dept&quot;,
                          &#39;3&#39; = &quot;Clinic/health center&quot;,
                          &#39;4&#39; = &quot;Senior, rec, or community center&quot;,
                          &#39;5&#39; = &quot;Supermarket/pharmacy&quot;,
                          &#39;6&#39; = &quot;Hospital&quot;,
                          &#39;7&#39; = &quot;ER&quot;,
                          &#39;8&#39; = &quot;Workplace&quot;,
                          &#39;9&#39; = &quot;Elsewhere&quot;,
                          &#39;10&#39; = &quot;Canada/Mexico&quot;,
                          &#39;11&#39; = &quot;A school&quot;,
                          &#39;77&#39; = &quot;Don&#39;t know/not sure&quot;,
                          &#39;99&#39; = &quot;Refused&quot;),
  )%&gt;% 
  count(flu_vacc_loc)%&gt;%
  mutate(flu_vacc_loc = fct_reorder(flu_vacc_loc, n)) %&gt;%
    plot_ly(x = ~flu_vacc_loc, y = ~n, color = ~flu_vacc_loc, type = &quot;bar&quot;, colors = &quot;plasma&quot;) %&gt;%
  layout(
    xaxis = list(title = &quot;Flu vaccine location&quot;),
    yaxis = list(title = &quot;Count (n)&quot;)
  )</code></pre>
<pre><code>## Warning: `arrange_()` is deprecated as of dplyr 0.7.0.
## Please use `arrange()` instead.
## See vignette(&#39;programming&#39;) for more help
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_warnings()` to see where this warning was generated.</code></pre>
<p><div id="htmlwidget-18124803369cf8f6599d" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-18124803369cf8f6599d">{"x":{"visdat":{"294831ea4be9":["function () ","plotlyVisDat"]},"cur_data":"294831ea4be9","attrs":{"294831ea4be9":{"x":{},"y":{},"color":{},"colors":"plasma","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Flu vaccine location","type":"category","categoryorder":"array","categoryarray":["Canada/Mexico","Refused","ER","Don't know/not sure","A school","Health dept","Senior, rec, or community center","Elsewhere","Hospital","Clinic/health center","Workplace","Supermarket/pharmacy","Doctor's office/HMO"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Count (n)"},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["Canada/Mexico"],"y":[3],"type":"bar","name":"Canada/Mexico","marker":{"color":"rgba(13,8,135,1)","line":{"color":"rgba(13,8,135,1)"}},"textfont":{"color":"rgba(13,8,135,1)"},"error_y":{"color":"rgba(13,8,135,1)"},"error_x":{"color":"rgba(13,8,135,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Refused"],"y":[4],"type":"bar","name":"Refused","marker":{"color":"rgba(59,4,154,1)","line":{"color":"rgba(59,4,154,1)"}},"textfont":{"color":"rgba(59,4,154,1)"},"error_y":{"color":"rgba(59,4,154,1)"},"error_x":{"color":"rgba(59,4,154,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["ER"],"y":[10],"type":"bar","name":"ER","marker":{"color":"rgba(93,1,166,1)","line":{"color":"rgba(93,1,166,1)"}},"textfont":{"color":"rgba(93,1,166,1)"},"error_y":{"color":"rgba(93,1,166,1)"},"error_x":{"color":"rgba(93,1,166,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Don't know/not sure"],"y":[54],"type":"bar","name":"Don't know/not sure","marker":{"color":"rgba(126,3,168,1)","line":{"color":"rgba(126,3,168,1)"}},"textfont":{"color":"rgba(126,3,168,1)"},"error_y":{"color":"rgba(126,3,168,1)"},"error_x":{"color":"rgba(126,3,168,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["A school"],"y":[68],"type":"bar","name":"A school","marker":{"color":"rgba(156,23,158,1)","line":{"color":"rgba(156,23,158,1)"}},"textfont":{"color":"rgba(156,23,158,1)"},"error_y":{"color":"rgba(156,23,158,1)"},"error_x":{"color":"rgba(156,23,158,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Health dept"],"y":[101],"type":"bar","name":"Health dept","marker":{"color":"rgba(181,47,140,1)","line":{"color":"rgba(181,47,140,1)"}},"textfont":{"color":"rgba(181,47,140,1)"},"error_y":{"color":"rgba(181,47,140,1)"},"error_x":{"color":"rgba(181,47,140,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Senior, rec, or community center"],"y":[105],"type":"bar","name":"Senior, rec, or community center","marker":{"color":"rgba(204,71,121,1)","line":{"color":"rgba(204,71,121,1)"}},"textfont":{"color":"rgba(204,71,121,1)"},"error_y":{"color":"rgba(204,71,121,1)"},"error_x":{"color":"rgba(204,71,121,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Elsewhere"],"y":[225],"type":"bar","name":"Elsewhere","marker":{"color":"rgba(222,95,101,1)","line":{"color":"rgba(222,95,101,1)"}},"textfont":{"color":"rgba(222,95,101,1)"},"error_y":{"color":"rgba(222,95,101,1)"},"error_x":{"color":"rgba(222,95,101,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Hospital"],"y":[440],"type":"bar","name":"Hospital","marker":{"color":"rgba(237,121,83,1)","line":{"color":"rgba(237,121,83,1)"}},"textfont":{"color":"rgba(237,121,83,1)"},"error_y":{"color":"rgba(237,121,83,1)"},"error_x":{"color":"rgba(237,121,83,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Clinic/health center"],"y":[570],"type":"bar","name":"Clinic/health center","marker":{"color":"rgba(248,148,65,1)","line":{"color":"rgba(248,148,65,1)"}},"textfont":{"color":"rgba(248,148,65,1)"},"error_y":{"color":"rgba(248,148,65,1)"},"error_x":{"color":"rgba(248,148,65,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Workplace"],"y":[895],"type":"bar","name":"Workplace","marker":{"color":"rgba(253,179,47,1)","line":{"color":"rgba(253,179,47,1)"}},"textfont":{"color":"rgba(253,179,47,1)"},"error_y":{"color":"rgba(253,179,47,1)"},"error_x":{"color":"rgba(253,179,47,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Supermarket/pharmacy"],"y":[3358],"type":"bar","name":"Supermarket/pharmacy","marker":{"color":"rgba(251,213,36,1)","line":{"color":"rgba(251,213,36,1)"}},"textfont":{"color":"rgba(251,213,36,1)"},"error_y":{"color":"rgba(251,213,36,1)"},"error_x":{"color":"rgba(251,213,36,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Doctor's office/HMO"],"y":[3507],"type":"bar","name":"Doctor's office/HMO","marker":{"color":"rgba(240,249,33,1)","line":{"color":"rgba(240,249,33,1)"}},"textfont":{"color":"rgba(240,249,33,1)"},"error_y":{"color":"rgba(240,249,33,1)"},"error_x":{"color":"rgba(240,249,33,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script> plot: flushot yes no by insurance yes no</p>
<pre class="r"><code>flushot_insurance =
brfss_df %&gt;%
  mutate(
    insurance = as.factor(hlthpln1)
  ) %&gt;%
  drop_na(insurance, flushot_yn) %&gt;%
  mutate(
    insurance = recode(insurance,
                          &#39;1&#39; = &#39;Yes&#39;,
                          &#39;2&#39; = &#39;No&#39;)
  )%&gt;% 
  filter(flushot_yn != &quot;Don&#39;t know/not sure&quot;)%&gt;%
  filter(flushot_yn != &quot;Refused&quot;)%&gt;%
  filter(insurance != &quot;7&quot;)%&gt;%
  filter(insurance != &quot;9&quot;)%&gt;%
  count(insurance, flushot_yn)%&gt;%
  group_by(insurance, flushot_yn) %&gt;%
  ggplot(aes(x = insurance, y = n, fill = flushot_yn))+
  geom_bar(position = &quot;stack&quot;, stat = &quot;identity&quot;)
  
ggplotly(flushot_insurance)</code></pre>
<div id="htmlwidget-a18277a8d3e2105a8ccd" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a18277a8d3e2105a8ccd">{"x":{"data":[{"orientation":"v","width":[0.9,0.9],"base":[166037,24419],"x":[1,2],"y":[181205,6494],"text":["insurance: Yes<br />n: 181205<br />flushot_yn: Yes","insurance: No<br />n:   6494<br />flushot_yn: Yes"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Yes","legendgroup":"Yes","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9],"base":[0,0],"x":[1,2],"y":[166037,24419],"text":["insurance: Yes<br />n: 166037<br />flushot_yn: No","insurance: No<br />n:  24419<br />flushot_yn: No"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(0,191,196,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"No","legendgroup":"No","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":54.7945205479452},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,2.6],"tickmode":"array","ticktext":["Yes","No"],"tickvals":[1,2],"categoryorder":"array","categoryarray":["Yes","No"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"insurance","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-17362.1,364604.1],"tickmode":"array","ticktext":["0e+00","1e+05","2e+05","3e+05"],"tickvals":[0,100000,200000,300000],"categoryorder":"array","categoryarray":["0e+00","1e+05","2e+05","3e+05"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"n","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.96751968503937},"annotations":[{"text":"flushot_yn","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"29483f014e24":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"29483f014e24","visdat":{"29483f014e24":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Ok finally here’s a little plot of the counts of where people got the vaccine. How many people actually responded yes?</p>
<pre class="r"><code>library(wesanderson)

#Midwest
plot_midwest =
  brfss_df %&gt;%
  filter(
    state == c(&quot;Illinois&quot;, &quot;Indiana&quot;, &quot;Iowa&quot;, &quot;Kansas&quot;, &quot;Michigan&quot;, &quot;Minnesota&quot;,
               &quot;Missouri&quot;, &quot;Nebraska&quot;, &quot;North Dakota&quot;, &quot;Ohio&quot;, &quot;South Dakota&quot;,
               &quot;Wisconsin&quot;)
    )%&gt;%
  drop_na(flushot_yn, state) %&gt;%
  select (state, flushot_yn) %&gt;%
  group_by(state, flushot_yn)%&gt;%
  summarize(n_obs = n()) %&gt;%
  mutate(
    pct = n_obs/sum(n_obs)
  )%&gt;%
  filter(flushot_yn != &quot;Don&#39;t know/not sure&quot;)%&gt;%
  filter(flushot_yn != &quot;Refused&quot;)%&gt;%
  ggplot(aes(fill = flushot_yn, y = pct, x = state))+
  geom_bar(position=&quot;dodge&quot;, stat = &quot;identity&quot;)+
  ylim(0, 1.0)+
  theme_bw()+
  labs(
    x = &quot;State&quot;,
    y = &quot;% Response&quot;,
    title = &quot;Frequency of flu vaccinations in the Midwestern region of the U.S&quot;
  )+
  scale_fill_discrete(name = &quot;Response&quot;)+
  theme(axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 1))</code></pre>
<pre><code>## Warning in `==.default`(state, c(&quot;Illinois&quot;, &quot;Indiana&quot;, &quot;Iowa&quot;, &quot;Kansas&quot;, :
## longer object length is not a multiple of shorter object length</code></pre>
<pre><code>## Warning in is.na(e1) | is.na(e2): longer object length is not a multiple of
## shorter object length</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;state&#39; (override with `.groups` argument)</code></pre>
<pre class="r"><code>ggplotly(plot_midwest) </code></pre>
<div id="htmlwidget-e6c7e45c19481bd5d63b" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e6c7e45c19481bd5d63b">{"x":{"data":[{"orientation":"v","width":[0.45,0.45,0.45,0.45,0.449999999999999,0.449999999999999,0.449999999999999,0.449999999999999,0.449999999999999,0.449999999999999,0.449999999999999,0.449999999999999],"base":[0,0,0,0,0,0,0,0,0,0,0,0],"x":[0.775,1.775,2.775,3.775,4.775,5.775,6.775,7.775,8.775,9.775,10.775,11.775],"y":[0.464622641509434,0.508982035928144,0.537748344370861,0.510227272727273,0.513872135102533,0.498296422487223,0.559027777777778,0.514657980456026,0.538812785388128,0.477582846003899,0.557835820895522,0.541114058355438],"text":["state: Illinois<br />pct: 0.4646226<br />flushot_yn: Yes","state: Indiana<br />pct: 0.5089820<br />flushot_yn: Yes","state: Iowa<br />pct: 0.5377483<br />flushot_yn: Yes","state: Kansas<br />pct: 0.5102273<br />flushot_yn: Yes","state: Michigan<br />pct: 0.5138721<br />flushot_yn: Yes","state: Minnesota<br />pct: 0.4982964<br />flushot_yn: Yes","state: Missouri<br />pct: 0.5590278<br />flushot_yn: Yes","state: Nebraska<br />pct: 0.5146580<br />flushot_yn: Yes","state: North Dakota<br />pct: 0.5388128<br />flushot_yn: Yes","state: Ohio<br />pct: 0.4775828<br />flushot_yn: Yes","state: South Dakota<br />pct: 0.5578358<br />flushot_yn: Yes","state: Wisconsin<br />pct: 0.5411141<br />flushot_yn: Yes"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Yes","legendgroup":"Yes","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.45,0.45,0.45,0.45,0.449999999999999,0.449999999999999,0.449999999999999,0.449999999999999,0.449999999999999,0.449999999999999,0.449999999999999,0.449999999999999],"base":[0,0,0,0,0,0,0,0,0,0,0,0],"x":[1.225,2.225,3.225,4.225,5.225,6.225,7.225,8.225,9.225,10.225,11.225,12.225],"y":[0.530660377358491,0.48502994011976,0.460927152317881,0.485227272727273,0.483715319662244,0.495741056218058,0.4375,0.481270358306189,0.45662100456621,0.517543859649123,0.434701492537313,0.458885941644562],"text":["state: Illinois<br />pct: 0.5306604<br />flushot_yn: No","state: Indiana<br />pct: 0.4850299<br />flushot_yn: No","state: Iowa<br />pct: 0.4609272<br />flushot_yn: No","state: Kansas<br />pct: 0.4852273<br />flushot_yn: No","state: Michigan<br />pct: 0.4837153<br />flushot_yn: No","state: Minnesota<br />pct: 0.4957411<br />flushot_yn: No","state: Missouri<br />pct: 0.4375000<br />flushot_yn: No","state: Nebraska<br />pct: 0.4812704<br />flushot_yn: No","state: North Dakota<br />pct: 0.4566210<br />flushot_yn: No","state: Ohio<br />pct: 0.5175439<br />flushot_yn: No","state: South Dakota<br />pct: 0.4347015<br />flushot_yn: No","state: Wisconsin<br />pct: 0.4588859<br />flushot_yn: No"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(0,191,196,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"No","legendgroup":"No","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":65.8458758420133,"l":48.9497716894977},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Frequency of flu vaccinations in the Midwestern region of the U.S","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,12.6],"tickmode":"array","ticktext":["Illinois","Indiana","Iowa","Kansas","Michigan","Minnesota","Missouri","Nebraska","North Dakota","Ohio","South Dakota","Wisconsin"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12],"categoryorder":"array","categoryarray":["Illinois","Indiana","Iowa","Kansas","Michigan","Minnesota","Missouri","Nebraska","North Dakota","Ohio","South Dakota","Wisconsin"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-45,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"State","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.05,1.05],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"% Response","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.96751968503937},"annotations":[{"text":"Response","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"294823ab6fca":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"294823ab6fca","visdat":{"294823ab6fca":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>plot_northeast =
 brfss_df %&gt;%
  filter(
    state == c(&quot;Connecticut&quot;,&quot;District of Columbia&quot;, &quot;Delaware&quot;,&quot;Maine&quot;, &quot;Massachusetts&quot;, &quot;Maryland&quot;,
               &quot;New Hampshire&quot;, &quot;New Jersey&quot;, &quot;New York&quot;, &quot;Pennsylvania&quot;,
               &quot;Rhode Island&quot;, &quot;Vermont&quot;)
    )%&gt;%
  drop_na(flushot_yn, state) %&gt;%
  select (state, flushot_yn) %&gt;%
  group_by(state, flushot_yn)%&gt;%
  summarize(n_obs = n()) %&gt;%
  mutate(
    pct = n_obs/sum(n_obs)
  )%&gt;%
  filter(flushot_yn != &quot;Don&#39;t know/not sure&quot;)%&gt;%
  filter(flushot_yn != &quot;refused&quot;)%&gt;%
  ggplot(aes(fill = flushot_yn, y = pct, x = state))+
  geom_bar(position=&quot;dodge&quot;, stat = &quot;identity&quot;)+
  ylim(0, 1.0)+
  theme_bw()+
  labs(
    x = &quot;State&quot;,
    y = &quot;% Response&quot;,
    title = &quot;Frequency of flu vaccinations in the Northeastern region of the U.S.&quot;
  )+
  scale_fill_discrete(name = &quot;Response&quot;)+
  theme(axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 1)) </code></pre>
<pre><code>## Warning in `==.default`(state, c(&quot;Connecticut&quot;, &quot;District of Columbia&quot;, : longer
## object length is not a multiple of shorter object length</code></pre>
<pre><code>## Warning in is.na(e1) | is.na(e2): longer object length is not a multiple of
## shorter object length</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;state&#39; (override with `.groups` argument)</code></pre>
<pre class="r"><code>ggplotly(plot_northeast)</code></pre>
<div id="htmlwidget-d90be9baa6e11775c870" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d90be9baa6e11775c870">{"x":{"data":[{"orientation":"v","width":[0.3,0.45,0.3,0.3,0.449999999999999,0.300000000000001,0.449999999999999,0.299999999999999,0.449999999999999,0.449999999999999,0.449999999999999],"base":[0,0,0,0,0,0,0,0,0,0,0],"x":[0.7,1.775,2.7,3.7,4.775,5.7,6.775,7.7,8.775,9.775,10.775],"y":[0.564064801178203,0.446428571428571,0.475138121546961,0.525442477876106,0.54880860876249,0.522801302931596,0.489311163895487,0.495668912415784,0.493282149712092,0.594170403587444,0.578732106339468],"text":["state: Connecticut<br />pct: 0.564064801<br />flushot_yn: Yes","state: Delaware<br />pct: 0.446428571<br />flushot_yn: Yes","state: District of Columbia<br />pct: 0.475138122<br />flushot_yn: Yes","state: Maine<br />pct: 0.525442478<br />flushot_yn: Yes","state: Maryland<br />pct: 0.548808609<br />flushot_yn: Yes","state: Massachusetts<br />pct: 0.522801303<br />flushot_yn: Yes","state: New Hampshire<br />pct: 0.489311164<br />flushot_yn: Yes","state: New York<br />pct: 0.495668912<br />flushot_yn: Yes","state: Pennsylvania<br />pct: 0.493282150<br />flushot_yn: Yes","state: Rhode Island<br />pct: 0.594170404<br />flushot_yn: Yes","state: Vermont<br />pct: 0.578732106<br />flushot_yn: Yes"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Yes","legendgroup":"Yes","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.3,0.45,0.3,0.3,0.449999999999999,0.300000000000001,0.449999999999999,0.300000000000001,0.449999999999999,0.449999999999999,0.449999999999999],"base":[0,0,0,0,0,0,0,0,0,0,0],"x":[1,2.225,3,4,5.225,6,7.225,8,9.225,10.225,11.225],"y":[0.431516936671576,0.553571428571429,0.519337016574586,0.464601769911504,0.448116833205227,0.462540716612378,0.510688836104513,0.497593840230991,0.502879078694818,0.403587443946188,0.415132924335378],"text":["state: Connecticut<br />pct: 0.431516937<br />flushot_yn: No","state: Delaware<br />pct: 0.553571429<br />flushot_yn: No","state: District of Columbia<br />pct: 0.519337017<br />flushot_yn: No","state: Maine<br />pct: 0.464601770<br />flushot_yn: No","state: Maryland<br />pct: 0.448116833<br />flushot_yn: No","state: Massachusetts<br />pct: 0.462540717<br />flushot_yn: No","state: New Hampshire<br />pct: 0.510688836<br />flushot_yn: No","state: New York<br />pct: 0.497593840<br />flushot_yn: No","state: Pennsylvania<br />pct: 0.502879079<br />flushot_yn: No","state: Rhode Island<br />pct: 0.403587444<br />flushot_yn: No","state: Vermont<br />pct: 0.415132924<br />flushot_yn: No"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"No","legendgroup":"No","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.3,0.3,0.300000000000001,0.300000000000001,0.300000000000001],"base":[0,0,0,0,0],"x":[1.3,3.3,4.3,6.3,8.3],"y":[0.00147275405007364,0.00552486187845304,0.00110619469026549,0.00325732899022801,0.00192492781520693],"text":["state: Connecticut<br />pct: 0.001472754<br />flushot_yn: Refused","state: District of Columbia<br />pct: 0.005524862<br />flushot_yn: Refused","state: Maine<br />pct: 0.001106195<br />flushot_yn: Refused","state: Massachusetts<br />pct: 0.003257329<br />flushot_yn: Refused","state: New York<br />pct: 0.001924928<br />flushot_yn: Refused"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Refused","legendgroup":"Refused","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":90.2069263039479,"l":48.9497716894977},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Frequency of flu vaccinations in the Northeastern region of the U.S.","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,11.6],"tickmode":"array","ticktext":["Connecticut","Delaware","District of Columbia","Maine","Maryland","Massachusetts","New Hampshire","New York","Pennsylvania","Rhode Island","Vermont"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11],"categoryorder":"array","categoryarray":["Connecticut","Delaware","District of Columbia","Maine","Maryland","Massachusetts","New Hampshire","New York","Pennsylvania","Rhode Island","Vermont"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-45,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"State","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.05,1.05],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"% Response","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.96751968503937},"annotations":[{"text":"Response","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"2948b123ff8":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"2948b123ff8","visdat":{"2948b123ff8":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>plot_west =
 brfss_df %&gt;%
  filter(
    state == c(&quot;Alaska&quot;, &quot;Arizona&quot;, &quot;California&quot;, &quot;Colorado&quot;,&quot;Hawaii&quot;, &quot;Idaho&quot;, &quot;Montana&quot;,
               &quot;Nevada&quot;, &quot;New Mexico&quot;, &quot;Oregon&quot;, &quot;Utah&quot;, &quot;Washington&quot;,
               &quot;Wyoming&quot;)
    )%&gt;%
  drop_na(flushot_yn, state) %&gt;%
  select (state, flushot_yn) %&gt;%
  group_by(state, flushot_yn)%&gt;%
  summarize(n_obs = n()) %&gt;%
  mutate(
    pct = n_obs/sum(n_obs)
  )%&gt;%
  filter(flushot_yn != &quot;Don&#39;t know/not sure&quot;)%&gt;%
  filter(flushot_yn != &quot;refused&quot;)%&gt;%
  ggplot(aes(fill = flushot_yn, y = pct, x = state))+
  geom_bar(position=&quot;dodge&quot;, stat = &quot;identity&quot;)+
  ylim(0, 1.0)+
  theme_bw()+
  labs(
    x = &quot;State&quot;,
    y = &quot;% Response&quot;,
    title = &quot;Frequency of flu vaccinations in the Western region of the U.S.&quot;
  )+
  scale_fill_discrete(name = &quot;Response&quot;)+
  theme(axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 1))</code></pre>
<pre><code>## Warning in `==.default`(state, c(&quot;Alaska&quot;, &quot;Arizona&quot;, &quot;California&quot;,
## &quot;Colorado&quot;, : longer object length is not a multiple of shorter object length</code></pre>
<pre><code>## Warning in is.na(e1) | is.na(e2): longer object length is not a multiple of
## shorter object length</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;state&#39; (override with `.groups` argument)</code></pre>
<pre class="r"><code>ggplotly(plot_west)</code></pre>
<div id="htmlwidget-984395bbedc8f1a23af1" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-984395bbedc8f1a23af1">{"x":{"data":[{"orientation":"v","width":[0.45,0.45,0.45,0.45,0.300000000000001,0.300000000000001,0.449999999999999,0.299999999999999,0.449999999999999,0.449999999999999,0.300000000000001,0.449999999999999,0.449999999999999],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[0.775,1.775,2.775,3.775,4.7,5.7,6.775,7.7,8.775,9.775,10.7,11.775,12.775],"y":[0.426395939086294,0.452922077922078,0.416557161629435,0.549844236760125,0.434862385321101,0.390862944162437,0.441860465116279,0.406417112299465,0.490521327014218,0.4543429844098,0.465577596266044,0.528538812785388,0.421828908554572],"text":["state: Alaska<br />pct: 0.426395939<br />flushot_yn: Yes","state: Arizona<br />pct: 0.452922078<br />flushot_yn: Yes","state: California<br />pct: 0.416557162<br />flushot_yn: Yes","state: Colorado<br />pct: 0.549844237<br />flushot_yn: Yes","state: Hawaii<br />pct: 0.434862385<br />flushot_yn: Yes","state: Idaho<br />pct: 0.390862944<br />flushot_yn: Yes","state: Montana<br />pct: 0.441860465<br />flushot_yn: Yes","state: Nevada<br />pct: 0.406417112<br />flushot_yn: Yes","state: New Mexico<br />pct: 0.490521327<br />flushot_yn: Yes","state: Oregon<br />pct: 0.454342984<br />flushot_yn: Yes","state: Utah<br />pct: 0.465577596<br />flushot_yn: Yes","state: Washington<br />pct: 0.528538813<br />flushot_yn: Yes","state: Wyoming<br />pct: 0.421828909<br />flushot_yn: Yes"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Yes","legendgroup":"Yes","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.45,0.45,0.45,0.45,0.300000000000001,0.300000000000001,0.449999999999999,0.300000000000001,0.449999999999999,0.449999999999999,0.300000000000001,0.449999999999999,0.449999999999999],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[1.225,2.225,3.225,4.225,5,6,7.225,8,9.225,10.225,11,12.225,13.225],"y":[0.563451776649746,0.542207792207792,0.579500657030223,0.448598130841121,0.554128440366973,0.591370558375635,0.556025369978858,0.588235294117647,0.504739336492891,0.536748329621381,0.527421236872812,0.471461187214612,0.575221238938053],"text":["state: Alaska<br />pct: 0.563451777<br />flushot_yn: No","state: Arizona<br />pct: 0.542207792<br />flushot_yn: No","state: California<br />pct: 0.579500657<br />flushot_yn: No","state: Colorado<br />pct: 0.448598131<br />flushot_yn: No","state: Hawaii<br />pct: 0.554128440<br />flushot_yn: No","state: Idaho<br />pct: 0.591370558<br />flushot_yn: No","state: Montana<br />pct: 0.556025370<br />flushot_yn: No","state: Nevada<br />pct: 0.588235294<br />flushot_yn: No","state: New Mexico<br />pct: 0.504739336<br />flushot_yn: No","state: Oregon<br />pct: 0.536748330<br />flushot_yn: No","state: Utah<br />pct: 0.527421237<br />flushot_yn: No","state: Washington<br />pct: 0.471461187<br />flushot_yn: No","state: Wyoming<br />pct: 0.575221239<br />flushot_yn: No"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"No","legendgroup":"No","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.300000000000001,0.300000000000001,0.300000000000001,0.300000000000001],"base":[0,0,0,0],"x":[5.3,6.3,8.3,11.3],"y":[0.0018348623853211,0.00253807106598985,0.0053475935828877,0.00116686114352392],"text":["state: Hawaii<br />pct: 0.001834862<br />flushot_yn: Refused","state: Idaho<br />pct: 0.002538071<br />flushot_yn: Refused","state: Nevada<br />pct: 0.005347594<br />flushot_yn: Refused","state: Utah<br />pct: 0.001166861<br />flushot_yn: Refused"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Refused","legendgroup":"Refused","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":59.804955726331,"l":48.9497716894977},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Frequency of flu vaccinations in the Western region of the U.S.","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,13.6],"tickmode":"array","ticktext":["Alaska","Arizona","California","Colorado","Hawaii","Idaho","Montana","Nevada","New Mexico","Oregon","Utah","Washington","Wyoming"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13],"categoryorder":"array","categoryarray":["Alaska","Arizona","California","Colorado","Hawaii","Idaho","Montana","Nevada","New Mexico","Oregon","Utah","Washington","Wyoming"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-45,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"State","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.05,1.05],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"% Response","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.96751968503937},"annotations":[{"text":"Response","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"29482246127e":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"29482246127e","visdat":{"29482246127e":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>plot_south =
 brfss_df %&gt;%
  filter(
    state == c(&quot;Alabama&quot;,&quot;Arkansas&quot;, &quot;Florida&quot;, &quot;Kentucky&quot;, &quot;Louisiana&quot;, 
               &quot;Mississippi&quot;, &quot;North Carolina&quot;, &quot;Oklahoma&quot;, &quot;South Carolina&quot;,
               &quot;Tennessee&quot;, &quot;Texas&quot;, &quot;Virginia&quot;, &quot;West Virginia&quot;)
    )%&gt;%
  drop_na(flushot_yn, state) %&gt;%
  select (state, flushot_yn) %&gt;%
  group_by(state, flushot_yn)%&gt;%
  summarize(n_obs = n()) %&gt;%
  mutate(
    pct = n_obs/sum(n_obs)
  )%&gt;%
  filter(flushot_yn != &quot;Don&#39;t know/not sure&quot;)%&gt;%
  filter(flushot_yn != &quot;refused&quot;)%&gt;%
  ggplot(aes(fill = flushot_yn, y = pct, x = state))+
  geom_bar(position=&quot;dodge&quot;, stat = &quot;identity&quot;)+
  ylim(0, 1.0)+
  theme_bw()+
  labs(
    x = &quot;State&quot;,
    y = &quot;% Response&quot;,
    title = &quot;Frequency of flu vaccinations in the Southern region of the U.S.&quot;
  )+
  scale_fill_discrete(name = &quot;Response&quot;)+
  theme(axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 1))</code></pre>
<pre><code>## Warning in `==.default`(state, c(&quot;Alabama&quot;, &quot;Arkansas&quot;, &quot;Florida&quot;, &quot;Kentucky&quot;, :
## longer object length is not a multiple of shorter object length</code></pre>
<pre><code>## Warning in is.na(e1) | is.na(e2): longer object length is not a multiple of
## shorter object length</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;state&#39; (override with `.groups` argument)</code></pre>
<pre class="r"><code>ggplotly(plot_south)</code></pre>
<div id="htmlwidget-c2aad2101f35d2c4fe1e" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-c2aad2101f35d2c4fe1e">{"x":{"data":[{"orientation":"v","width":[0.45,0.3,0.45,0.45,0.449999999999999,0.300000000000001,0.300000000000001,0.299999999999999,0.300000000000001,0.449999999999999,0.300000000000001,0.449999999999999,0.449999999999999],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[0.775,1.7,2.775,3.775,4.775,5.7,6.7,7.7,8.7,9.775,10.7,11.775,12.775],"y":[0.49498997995992,0.513227513227513,0.415929203539823,0.496503496503497,0.426751592356688,0.473262032085562,0.511627906976744,0.486547085201794,0.477669902912621,0.485714285714286,0.483293556085919,0.512372634643377,0.533678756476684],"text":["state: Alabama<br />pct: 0.494989980<br />flushot_yn: Yes","state: Arkansas<br />pct: 0.513227513<br />flushot_yn: Yes","state: Florida<br />pct: 0.415929204<br />flushot_yn: Yes","state: Kentucky<br />pct: 0.496503497<br />flushot_yn: Yes","state: Louisiana<br />pct: 0.426751592<br />flushot_yn: Yes","state: Mississippi<br />pct: 0.473262032<br />flushot_yn: Yes","state: North Carolina<br />pct: 0.511627907<br />flushot_yn: Yes","state: Oklahoma<br />pct: 0.486547085<br />flushot_yn: Yes","state: South Carolina<br />pct: 0.477669903<br />flushot_yn: Yes","state: Tennessee<br />pct: 0.485714286<br />flushot_yn: Yes","state: Texas<br />pct: 0.483293556<br />flushot_yn: Yes","state: Virginia<br />pct: 0.512372635<br />flushot_yn: Yes","state: West Virginia<br />pct: 0.533678756<br />flushot_yn: Yes"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Yes","legendgroup":"Yes","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.45,0.3,0.45,0.45,0.449999999999999,0.300000000000001,0.300000000000001,0.300000000000001,0.300000000000001,0.449999999999999,0.300000000000001,0.449999999999999,0.449999999999999],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[1.225,2,3.225,4.225,5.225,6,7,8,9,10.225,11,12.225,13.225],"y":[0.503006012024048,0.478835978835979,0.573451327433628,0.501748251748252,0.573248407643312,0.524064171122995,0.481727574750831,0.495515695067265,0.516504854368932,0.514285714285714,0.513126491646778,0.478893740902475,0.463730569948187],"text":["state: Alabama<br />pct: 0.503006012<br />flushot_yn: No","state: Arkansas<br />pct: 0.478835979<br />flushot_yn: No","state: Florida<br />pct: 0.573451327<br />flushot_yn: No","state: Kentucky<br />pct: 0.501748252<br />flushot_yn: No","state: Louisiana<br />pct: 0.573248408<br />flushot_yn: No","state: Mississippi<br />pct: 0.524064171<br />flushot_yn: No","state: North Carolina<br />pct: 0.481727575<br />flushot_yn: No","state: Oklahoma<br />pct: 0.495515695<br />flushot_yn: No","state: South Carolina<br />pct: 0.516504854<br />flushot_yn: No","state: Tennessee<br />pct: 0.514285714<br />flushot_yn: No","state: Texas<br />pct: 0.513126492<br />flushot_yn: No","state: Virginia<br />pct: 0.478893741<br />flushot_yn: No","state: West Virginia<br />pct: 0.463730570<br />flushot_yn: No"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"No","legendgroup":"No","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.3,0.300000000000001,0.300000000000001,0.300000000000001,0.300000000000001,0.300000000000001],"base":[0,0,0,0,0,0],"x":[2.3,6.3,7.3,8.3,9.3,11.3],"y":[0.00264550264550265,0.00267379679144385,0.00332225913621262,0.00448430493273543,0.00194174757281553,0.00119331742243437],"text":["state: Arkansas<br />pct: 0.002645503<br />flushot_yn: Refused","state: Mississippi<br />pct: 0.002673797<br />flushot_yn: Refused","state: North Carolina<br />pct: 0.003322259<br />flushot_yn: Refused","state: Oklahoma<br />pct: 0.004484305<br />flushot_yn: Refused","state: South Carolina<br />pct: 0.001941748<br />flushot_yn: Refused","state: Texas<br />pct: 0.001193317<br />flushot_yn: Refused"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Refused","legendgroup":"Refused","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":71.9148116865076,"l":48.9497716894977},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Frequency of flu vaccinations in the Southern region of the U.S.","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,13.6],"tickmode":"array","ticktext":["Alabama","Arkansas","Florida","Kentucky","Louisiana","Mississippi","North Carolina","Oklahoma","South Carolina","Tennessee","Texas","Virginia","West Virginia"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13],"categoryorder":"array","categoryarray":["Alabama","Arkansas","Florida","Kentucky","Louisiana","Mississippi","North Carolina","Oklahoma","South Carolina","Tennessee","Texas","Virginia","West Virginia"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-45,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"State","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.05,1.05],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"% Response","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.96751968503937},"annotations":[{"text":"Response","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"2948abb45f":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"2948abb45f","visdat":{"2948abb45f":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="will-try-to-iterate-over-datasets-from-2015-to-now-and-see-if-i-can-plot-a-trend" class="section level4">
<h4>Will try to iterate over datasets from 2015 to now and see if I can plot a trend</h4>
<p>hopefully the code will be similar to what we did in the last homework</p>
<pre class="r"><code>goal_trend = 
list.files(path = &quot;./final_project_large_data&quot;, full.names=FALSE)%&gt;%
  tibble::enframe(name = NULL)</code></pre>
<p>Data too large :-(</p>
<pre class="r"><code># goal_trend_df =
#   goal_trend %&gt;%
#   mutate(
#     data = map(value, ~read_xpt(str_c(&quot;./final_project_large_data/&quot;, .x)))
#   )%&gt;%
#   unnest(cols = data)%&gt;%
#   separate(value, into=c(&quot;survey&quot;, &quot;year&quot;))</code></pre>
</div>
<div id="i-want-to-try-and-scrape-data-from-twitter-ha" class="section level4">
<h4>I want to try and scrape data from twitter HA!</h4>
<pre class="r"><code>library(rvest)</code></pre>
<pre><code>## Loading required package: xml2</code></pre>
<pre><code>## 
## Attaching package: &#39;rvest&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     pluck</code></pre>
<pre><code>## The following object is masked from &#39;package:readr&#39;:
## 
##     guess_encoding</code></pre>
<pre class="r"><code>library(httr)</code></pre>
<pre><code>## 
## Attaching package: &#39;httr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:plotly&#39;:
## 
##     config</code></pre>
<pre class="r"><code>library(rtweet)</code></pre>
<pre><code>## Warning: package &#39;rtweet&#39; was built under R version 4.0.3</code></pre>
<pre><code>## 
## Attaching package: &#39;rtweet&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     flatten</code></pre>
<pre class="r"><code>library(httpuv)</code></pre>
<pre><code>## Warning: package &#39;httpuv&#39; was built under R version 4.0.3</code></pre>
<pre class="r"><code>#look at twitr test


# url = &quot;https://twitter.com/search?q=flu%20vaccines&amp;src=typeahead_click&quot;
# twitter_html = read_html(url)%&gt;%
#   html_nodes(css = &quot;table&quot;)
# 
# tweets1 = search_tweets(q = &quot;#Vaccine&quot;, 
#                         n = 18000,
#                         include_rts = FALSE,
#                         `-filter` = &quot;replies&quot;,
#                         lang = &quot;en&quot;)
# 
# 
# tweets_df = 
#   search_tweets(q = &quot;flu OR shot OR vaccine&quot;, 
#                         n = 18000,
#                         include_rts = FALSE,
#                         `-filter` = &quot;replies&quot;,
#                         lang = &quot;en&quot;) %&gt;%
#   write_as_csv(&quot;./final_project_large_data/tweets_df.csv&quot;)</code></pre>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
